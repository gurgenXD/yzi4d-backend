/*!
  * Button visually impaired - v1.0.0 https://bvi.isvek.ru
  * Copyright 2014-2021 Oleg Korotenko <bvi@isvek.ru>.
  * Licensed MIT (https://github.com/veks/button-visually-impaired-javascript/blob/master/LICENSE.md)
*/ !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).isvek=t()}(this,function(){"use strict";function e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}!function(e){var t=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(u){c=function e(t,i,n){return t[i]=n}}function v(e,t,i,n){var a,r,o,s,l=Object.create((t&&t.prototype instanceof b?t:b).prototype),c=new O(n||[]);return l._invoke=(a=e,r=i,o=c,s=h,function e(t,i){if(s===d)throw Error("Generator is already running");if(s===g){if("throw"===t)throw i;return x()}for(o.method=t,o.arg=i;;){var n=o.delegate;if(n){var l=w(n,o);if(l){if(l===p)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===h)throw s=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=d;var c=f(a,r,o);if("normal"===c.type){if(s=o.done?g:"suspendedYield",c.arg===p)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(s=g,o.method="throw",o.arg=c.arg)}}),l}function f(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(n){return{type:"throw",arg:n}}}e.wrap=v;var h="suspendedStart",d="executing",g="completed",p={};function b(){}function m(){}function y(){}var $={};c($,o,function(){return this});var S=Object.getPrototypeOf,k=S&&S(S(q([])));k&&k!==n&&a.call(k,o)&&($=k);var _=y.prototype=b.prototype=Object.create($);function L(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function B(e,t){var n;this._invoke=function r(o,s){function l(){return new t(function(n,r){!function n(r,o,s,l){var c=f(e[r],e,o);if("throw"===c.type)l(c.arg);else{var u=c.arg,v=u.value;return v&&"object"===i(v)&&a.call(v,"__await")?t.resolve(v.__await).then(function(e){n("next",e,s,l)},function(e){n("throw",e,s,l)}):t.resolve(v).then(function(e){u.value=e,s(u)},function(e){return n("throw",e,s,l)})}}(o,s,n,r)})}return n=n?n.then(l,l):l()}}function w(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator.return&&(i.method="return",i.arg=t,w(e,i),"throw"===i.method))return p;i.method="throw",i.arg=TypeError("The iterator does not provide a 'throw' method")}return p}var a=f(n,e.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,p;var r=a.arg;return r?r.done?(i[e.resultName]=r.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,p):r:(i.method="throw",i.arg=TypeError("iterator result is not an object"),i.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function q(e){if(e){var i=e[o];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(a.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return r.next=r}}return{next:x}}function x(){return{value:t,done:!0}}return m.prototype=y,c(_,"constructor",y),c(y,"constructor",m),m.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},L(B.prototype),c(B.prototype,s,function(){return this}),e.AsyncIterator=B,e.async=function(t,i,n,a,r){void 0===r&&(r=Promise);var o=new B(v(t,i,n,a),r);return e.isGeneratorFunction(i)?o:o.next().then(function(e){return e.done?e.value:o.next()})},L(_),c(_,l,"Generator"),c(_,o,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=q,O.prototype={constructor:O,reset:function e(i){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!i)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(i){if(this.done)throw i;var n=this;function r(e,a){return l.type="throw",l.arg=i,n.next=e,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],l=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else if(u){if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function e(t,i){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=i&&i<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return(s.type=t,s.arg=i,o)?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),p},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var r=a.arg;A(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function e(i,n,a){return this.delegate={iterator:q(i),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(n){("undefined"==typeof globalThis?"undefined":i(globalThis))==="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}({exports:{}}),function(e){e.forEach(function(e){!e.hasOwnProperty("prepend")&&Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function e(){var t=Array.prototype.slice.call(arguments),i=document.createDocumentFragment();t.forEach(function(e){var t=e instanceof Node;i.appendChild(t?e:document.createTextNode(String(e)))}),this.insertBefore(i,this.firstChild)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.HTMLCollection&&!HTMLCollection.prototype.forEach&&(HTMLCollection.prototype.forEach=Array.prototype.forEach);var l,c=function e(t,n,a){Object.keys(n).forEach(function(e){var a,r,o=n[e],s=t[e],l=s&&(a=s)&&"object"===i(a)&&void 0!==a.nodeType?"element":null==(r=s)?"".concat(r):({}).toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!RegExp(o).test(l))throw TypeError('Bvi console: Опция "'.concat(e,'" предоставленный тип "').concat(l,'", ожидаемый тип "').concat(o,'".'))}),Object.keys(a).forEach(function(e){var i=a[e],n=t[e];if(!RegExp(i).test(n))throw TypeError('Bvi console: Опция "'.concat(e,'" параметр "').concat(n,'", ожидаемый параметр "').concat(i,'".'))})},u=function e(t){switch(t){case"on":case"true":case"1":return!0;default:return!1}},v=function e(t,i,n){for("string"==typeof i&&(i=document.createElement(i)),t.appendChild(i).className=n;t.firstChild!==i;)i.appendChild(t.firstChild)},f=function e(t){var i=document.createDocumentFragment();if(t){for(;t.firstChild;){var n=t.removeChild(t.firstChild);i.appendChild(n)}t.parentNode.replaceChild(i,t)}},h=function e(t,i){Object.keys(t).forEach(function(e){"function"==typeof i&&i(e)})},d=function e(t,i){Array.from(t).forEach(function(e){"function"==typeof i&&i(e)})},g=function e(){return window.speechSynthesis},p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Date,a=n.getTime();a+=864e5,n.setTime(a),document.cookie="bvi_".concat(t,"=").concat(i,",path=/,expires=").concat(n.toUTCString(),",domain=").concat(location.host)},b=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t="bvi_".concat(t,"=");for(var i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){var a=i[n].trim();if(-1!==a.indexOf(t)){let r=a.split(",");return r[0].substring(t.length,r[0].length)}}},m=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";document.cookie="bvi_".concat(t,"=,path=/,expires=Thu, 01 Jan 1970 00:00:01 GMT,domain=").concat(location.host)},y={"ru-RU":{text:{fontSize:"Размер шрифта",siteColors:"Цвета сайта",images:"Изображения",speech:"Синтез речи",settings:"Настройки",regularVersionOfTheSite:"Обычная версия сайта",letterSpacing:"Межбуквенное расстояние",normal:"Стандартный",average:"Средний",big:"Большой",lineHeight:"Межстрочный интервал",font:"Шрифт",arial:"Без засечек",times:"С засечками",builtElements:"Встроенные элементы (Видео, карты и тд.)",on:"Включить",off:"Выключить",reset:"Сбросить настройки",plural_0:"пиксель",plural_1:"пекселя",plural_2:"пикселей"},voice:{fontSizePlus:"Размер шрифта увели́чен",fontSizeMinus:"Размер шрифта уме́ньшен",siteColorBlackOnWhite:"Цвет сайта черным по белому",siteColorWhiteOnBlack:"Цвет сайта белым по черному",siteColorDarkBlueOnBlue:"Цвет сайта тёмно-синим по голубому",siteColorBeigeBrown:"Цвет сайта кори́чневым по бе́жевому",siteColorGreenOnDarkBrown:"Цвет сайта зеленым по тёмно-коричневому",imagesOn:"Изображения включены",imagesOFF:"Изображения выключены",imagesGrayscale:"Изображения чёрно-белые",speechOn:"Синтез речи включён",speechOff:"Синтез речи вы́ключен",lineHeightNormal:"Межстрочный интервал стандартный",lineHeightAverage:"Межстрочный интервал средний",lineHeightBig:"Межстрочный интервал большой",LetterSpacingNormal:"Интервал между буквами стандартный",LetterSpacingAverage:"Интервал между буквами средний",LetterSpacingBig:"Интервал между буквами большой",fontArial:"Шрифт без засечек",fontTimes:"Шрифт с засечками",builtElementsOn:"Встроенные элементы включены",builtElementsOFF:"Встроенные элементы выключены",resetSettings:"Установлены настройки по умолча́нию",panelShow:"Панель открыта",panelHide:"Панель скрыта",panelOn:"Версия сайта для слабови́дящий",panelOff:"Обычная версия сайта"}},"en-US":{text:{fontSize:"Font size",siteColors:"Site colors",images:"Images",speech:"Speech synthesis",settings:"Settings",regularVersionOfTheSite:"Regular version Of The site",letterSpacing:"Letter spacing",normal:"Single",average:"One and a half",big:"Double",lineHeight:"Line spacing",font:"Font",arial:"Sans Serif - Arial",times:"Serif - Times New Roman",builtElements:"Include inline elements (Videos, maps, etc.)",on:"Enable",off:"Disabled",reset:"Reset settings",plural_0:"pixel",plural_1:"pixels",plural_2:"pixels"},voice:{fontSizePlus:"Font size increased",fontSizeMinus:"Font size reduced",siteColorBlackOnWhite:"Site color black on white",siteColorWhiteOnBlack:"Site color white on black",siteColorDarkBlueOnBlue:"Site color dark blue on cyan",siteColorBeigeBrown:"SiteColorBeigeBrown",siteColorGreenOnDarkBrown:"Site color green on dark brown",imagesOn:"Images enable",imagesOFF:"Images disabled",imagesGrayscale:"Images gray scale",speechOn:"Synthesis speech enable",speechOff:"Synthesis speech disabled",lineHeightNormal:"Line spacing single",lineHeightAverage:"Line spacing one and a half",lineHeightBig:"Line spacing double",LetterSpacingNormal:"Letter spacing single",LetterSpacingAverage:"Letter spacing one and a half",LetterSpacingBig:"Letter spacing letter double",fontArial:"Sans Serif - Arial",fontTimes:"Serif - Times New Roman",builtElementsOn:"Include inline elements are enabled",builtElementsOFF:"Include inline elements are disabled",resetSettings:"Default settings have been set",panelShow:"Panel show",panelHide:"Panel hide",panelOn:"Site version for visually impaired",panelOff:"Regular version of the site"}}},$=function(){function e(t){n(this,e),this._config=t}return r(e,[{key:"t",value:function e(t){return y[this._config.lang].text[t]}},{key:"v",value:function e(t){return y[this._config.lang].voice[t]}}]),e}(),S={target:".bvi-open",fontSize:16,theme:"white",images:"grayscale",letterSpacing:"normal",lineHeight:"normal",speech:!0,fontFamily:"arial",builtElements:!1,panelFixed:!0,panelHide:!1,reload:!1,lang:"ru-RU"},k={target:"string",fontSize:"number",theme:"string",images:"(string|boolean)",letterSpacing:"string",lineHeight:"string",speech:"boolean",fontFamily:"string",builtElements:"boolean",panelFixed:"boolean",panelHide:"boolean",reload:"boolean",lang:"string"},_={target:"",fontSize:"(^[1-9]$|^[1-3][0-9]?$|^39$)",theme:"(white|black|blue|brown|green)",images:"(true|false|grayscale)",letterSpacing:"(normal|average|big)",lineHeight:"(normal|average|big)",speech:"(true|false)",fontFamily:"(arial|times)",builtElements:"(true|false)",panelFixed:"(true|false)",panelHide:"(true|false)",reload:"(true|false)",lang:"(ru-RU|en-US)"};return{Bvi:function(){function e(t){n(this,e),this._config=this._getConfig(t),this._elements=document.querySelectorAll(this._config.target),this._i18n=new $({lang:this._config.lang}),this._addEventListeners(),this._init(),console.log("Bvi console: ready Button visually impaired v1.0.0")}return r(e,[{key:"_init",value:function e(){h(this._config,function(e){void 0===b(e)&&m("panelActive")}),u(b("panelActive"))?(this._set(),this._getPanel(),this._addEventListenersPanel(),this._images(),this._speechPlayer(),"speechSynthesis"in window&&u(b("speech"))&&setInterval(function(){if(!1===g().pending){var e=document.querySelectorAll(".bvi-speech-play"),t=document.querySelectorAll(".bvi-speech-pause"),i=document.querySelectorAll(".bvi-speech-resume"),n=document.querySelectorAll(".bvi-speech-stop"),a=function e(t,i){t.forEach(function(e){return i(e)})};a(e,function(e){return e.classList.remove("disabled")}),a(t,function(e){return e.classList.add("disabled")}),a(i,function(e){return e.classList.add("disabled")}),a(n,function(e){return e.classList.add("disabled")})}},1e3)):this._remove()}},{key:"_addEventListeners",value:function e(){var t=this;if(!this._elements)return!1;this._elements.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),h(t._config,function(e){return p(e,t._config[e])}),p("panelActive",!0),t._init(),t._speech("".concat(t._i18n.v("panelOn")))})})}},{key:"_addEventListenersPanel",value:function e(){var t=this,i={fontSizeMinus:document.querySelector(".bvi-fontSize-minus"),fontSizePlus:document.querySelector(".bvi-fontSize-plus"),themeWhite:document.querySelector(".bvi-theme-white"),themeBlack:document.querySelector(".bvi-theme-black"),themeBlue:document.querySelector(".bvi-theme-blue"),themeBrown:document.querySelector(".bvi-theme-brown"),themeGreen:document.querySelector(".bvi-theme-green"),imagesOn:document.querySelector(".bvi-images-on"),imagesOff:document.querySelector(".bvi-images-off"),imagesGrayscale:document.querySelector(".bvi-images-grayscale"),speechOn:document.querySelector(".bvi-speech-on"),speechOff:document.querySelector(".bvi-speech-off"),lineHeightNormal:document.querySelector(".bvi-line-height-normal"),lineHeightAverage:document.querySelector(".bvi-line-height-average"),lineHeightBig:document.querySelector(".bvi-line-height-big"),letterSpacingNormal:document.querySelector(".bvi-letter-spacing-normal"),letterSpacingAverage:document.querySelector(".bvi-letter-spacing-average"),letterSpacingBig:document.querySelector(".bvi-letter-spacing-big"),fontFamilyArial:document.querySelector(".bvi-font-family-arial"),fontFamilyTimes:document.querySelector(".bvi-font-family-times"),builtElementsOn:document.querySelector(".bvi-built-elements-on"),builtElementsOff:document.querySelector(".bvi-built-elements-off"),reset:document.querySelector(".bvi-reset"),links:document.querySelectorAll(".bvi-link"),modal:document.querySelector(".bvi-modal")},n=function e(t){var i,n=function e(t,i){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function e(t,i){if(t){if("string"==typeof t)return s(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(t,i)}}(t))){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}(t.parentNode.children);try{for(n.s();!(i=n.n()).done;)i.value.classList.remove("active")}catch(a){n.e(a)}finally{n.f()}t.classList.add("active")},a=function e(t,i){t.addEventListener("click",function(e){e.preventDefault(),"function"==typeof i&&i(e)})},r=function e(){document.querySelectorAll(".bvi-link").forEach(function(e){e.classList.remove("active")}),h(t._config,function(e){if("theme"===e){var t=b(e);document.querySelector(".bvi-theme-".concat(t)).classList.add("active")}if("images"===e){var i="grayscale"===b(e)?"grayscale":u(b(e))?"on":"off";document.querySelector(".bvi-images-".concat(i)).classList.add("active")}if("speech"===e){var n=u(b(e))?"on":"off";document.querySelector(".bvi-speech-".concat(n)).classList.add("active")}if("lineHeight"===e){var a=b(e);document.querySelector(".bvi-line-height-".concat(a)).classList.add("active")}if("letterSpacing"===e){var r=b(e);document.querySelector(".bvi-letter-spacing-".concat(r)).classList.add("active")}if("fontFamily"===e){var o=b(e);document.querySelector(".bvi-font-family-".concat(o)).classList.add("active")}if("builtElements"===e){var s=u(b(e))?"on":"off";document.querySelector(".bvi-built-elements-".concat(s)).classList.add("active")}})};r(),a(i.fontSizeMinus,function(){var e=parseFloat(b("fontSize"))-1;0!==e&&(t._setAttrDataBviBody("fontSize",e),p("fontSize",e),t._speech("".concat(t._i18n.v("fontSizeMinus"))),n(i.fontSizeMinus))}),a(i.fontSizePlus,function(){var e=parseFloat(b("fontSize"))+1;40!==e&&(t._setAttrDataBviBody("fontSize",e),p("fontSize",e),t._speech("".concat(t._i18n.v("fontSizePlus"))),n(i.fontSizePlus))}),a(i.themeWhite,function(){t._setAttrDataBviBody("theme","white"),p("theme","white"),t._speech("".concat(t._i18n.v("siteColorBlackOnWhite"))),n(i.themeWhite)}),a(i.themeBlack,function(){t._setAttrDataBviBody("theme","black"),p("theme","black"),t._speech("".concat(t._i18n.v("siteColorWhiteOnBlack"))),n(i.themeBlack)}),a(i.themeBlue,function(){t._setAttrDataBviBody("theme","blue"),p("theme","blue"),t._speech("".concat(t._i18n.v("siteColorDarkBlueOnBlue"))),n(i.themeBlue)}),a(i.themeBrown,function(){t._setAttrDataBviBody("theme","brown"),p("theme","brown"),t._speech("".concat(t._i18n.v("siteColorBeigeBrown"))),n(i.themeBrown)}),a(i.themeGreen,function(){t._setAttrDataBviBody("theme","green"),p("theme","green"),t._speech("".concat(t._i18n.v("siteColorGreenOnDarkBrown"))),n(i.themeGreen)}),a(i.imagesOn,function(){t._setAttrDataBviBody("images","true"),p("images","true"),t._speech("".concat(t._i18n.v("imagesOn"))),n(i.imagesOn)}),a(i.imagesOff,function(){t._setAttrDataBviBody("images","false"),p("images","false"),t._speech("".concat(t._i18n.v("imagesOFF"))),n(i.imagesOff)}),a(i.imagesGrayscale,function(){t._setAttrDataBviBody("images","grayscale"),p("images","grayscale"),t._speech("".concat(t._i18n.v("imagesGrayscale"))),n(i.imagesGrayscale)}),a(i.speechOn,function(){t._setAttrDataBviBody("speech","true"),p("speech","true"),t._speech("".concat(t._i18n.v("speechOn"))),n(i.speechOn),t._speechPlayer()}),a(i.speechOff,function(){t._speech("".concat(t._i18n.v("speechOff"))),t._setAttrDataBviBody("speech","false"),p("speech","false"),n(i.speechOff),t._speechPlayer()}),a(i.lineHeightNormal,function(){t._setAttrDataBviBody("lineHeight","normal"),p("lineHeight","normal"),t._speech("".concat(t._i18n.v("lineHeightNormal"))),n(i.lineHeightNormal)}),a(i.lineHeightAverage,function(){t._setAttrDataBviBody("lineHeight","average"),p("lineHeight","average"),t._speech("".concat(t._i18n.v("lineHeightAverage"))),n(i.lineHeightAverage)}),a(i.lineHeightBig,function(){t._setAttrDataBviBody("lineHeight","big"),p("lineHeight","big"),t._speech("".concat(t._i18n.v("lineHeightBig"))),n(i.lineHeightBig)}),a(i.letterSpacingNormal,function(){t._setAttrDataBviBody("letterSpacing","normal"),p("letterSpacing","normal"),t._speech("".concat(t._i18n.v("LetterSpacingNormal"))),n(i.letterSpacingNormal)}),a(i.letterSpacingAverage,function(){t._setAttrDataBviBody("letterSpacing","average"),p("letterSpacing","average"),t._speech("".concat(t._i18n.v("LetterSpacingAverage"))),n(i.letterSpacingAverage)}),a(i.letterSpacingBig,function(){t._setAttrDataBviBody("letterSpacing","big"),p("letterSpacing","big"),t._speech("".concat(t._i18n.v("LetterSpacingBig"))),n(i.letterSpacingBig)}),a(i.fontFamilyArial,function(){t._setAttrDataBviBody("fontFamily","arial"),p("fontFamily","arial"),t._speech("".concat(t._i18n.v("fontArial"))),n(i.fontFamilyArial)}),a(i.fontFamilyTimes,function(){t._setAttrDataBviBody("fontFamily","times"),p("fontFamily","times"),t._speech("".concat(t._i18n.v("fontTimes"))),n(i.fontFamilyTimes)}),a(i.builtElementsOn,function(){t._setAttrDataBviBody("builtElements","true"),p("builtElements","true"),t._speech("".concat(t._i18n.v("builtElementsOn"))),n(i.builtElementsOn)}),a(i.builtElementsOff,function(){t._setAttrDataBviBody("builtElements","false"),p("builtElements","false"),t._speech("".concat(t._i18n.v("builtElementsOFF"))),n(i.builtElementsOff)}),a(i.reset,function(){t._speech("".concat(t._i18n.v("resetSettings"))),h(t._config,function(e){t._setAttrDataBviBody(e,t._config[e]),p(e,t._config[e]),r()})}),d(i.links,function(e){a(e,function(e){var n=e.target.getAttribute("data-bvi");"close"===n&&(t._setAttrDataBviBody("panelActive","false"),p("panelActive","false"),t._init()),"modal"===n&&(document.body.style.overflow="hidden",document.body.classList.add("bvi-noscroll"),i.modal.classList.toggle("show")),"modal-close"===n&&(document.body.classList.remove("bvi-noscroll"),document.body.style.overflow="",i.modal.classList.remove("show")),"panel-hide"===n&&(document.querySelector(".bvi-panel").classList.add("bvi-panel-hide"),document.querySelector(".bvi-link-fixed-top").classList.remove("bvi-hide"),document.querySelector(".bvi-link-fixed-top").classList.add("bvi-show"),p("panelHide","true"),t._speech("".concat(t._i18n.v("panelHide")))),"panel-show"===n&&(document.querySelector(".bvi-link-fixed-top").classList.remove("bvi-show"),document.querySelector(".bvi-link-fixed-top").classList.add("bvi-hide"),document.querySelector(".bvi-panel").classList.remove("bvi-panel-hide"),p("panelHide","false"),t._speech("".concat(t._i18n.v("panelShow"))))})}),a(i.modal,function(e){e.target.contains(i.modal)&&(document.body.classList.remove("bvi-noscroll"),document.body.style.overflow="",i.modal.classList.remove("show"))})}},{key:"_getPanel",value:function e(){var t=function e(){var e=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;u(b("panelFixed"))&&(e>200?document.querySelector(".bvi-panel").classList.add("bvi-fixed-top"):document.querySelector(".bvi-panel").classList.remove("bvi-fixed-top"))},i=u(b("panelHide"))?" bvi-panel-hide":"",n=u(b("panelHide"))?"bvi-show":" bvi-hide",a="\n    <div class='bvi-panel".concat(i,'\'>\n        <div class="bvi-blocks bvi-block-center">\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("fontSize"),'</div>\n                <a class="bvi-link bvi-fontSize-minus">А-</a>\n                <a class="bvi-link bvi-fontSize-plus">А+</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("siteColors"),'</div>\n                <a href="#" class="bvi-link bvi-theme-white">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-black">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-blue">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-brown">Ц</a>\n                <a href="#" class="bvi-link bvi-theme-green">Ц</a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("images"),'</div>\n                <a href="#" class="bvi-link bvi-images-on">\n                    <i class="bvi-images bvi-images-image"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-off">\n                    <i class="bvi-images bvi-images-minus-circle"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-images-grayscale">\n                    <i class="bvi-images bvi-images-adjust"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("speech"),'</div>\n                <a href="#" class="bvi-link bvi-speech-off">\n                    <i class="bvi-images bvi-images-volume-off"></i>\n                </a>\n                <a href="#" class="bvi-link bvi-speech-on">\n                    <i class="bvi-images bvi-images-volume-up"></i>\n                </a>\n            </div>\n            <div class="bvi-block">\n                <div class="bvi-block-title">').concat(this._i18n.t("settings"),'</div>\n                <a href="#" class="bvi-link" data-bvi="modal">\n                    <i class="bvi-images bvi-images-cog"></i>\n                </a>\n                <a href="#" class="bvi-link" data-bvi="close">\n                    ').concat(this._i18n.t("regularVersionOfTheSite"),'\n                </a>\n                <a href="#" class="bvi-link" data-bvi="panel-hide">\n                    <i class="bvi-images bvi-images-minus"></i>\n                </a>\n            </div>\n        </div>\n        <div class="bvi-modal">\n            <div class="bvi-modal-dialog">\n                <div class="bvi-modal-content">\n                    <div class="bvi-modal-header">\n                        <div class="bvi-modal-title">').concat(this._i18n.t("settings"),'</div>\n                        <a href="#" class="bvi-link bvi-modal-close" data-bvi="modal-close">\xd7</a>\n                    </div>\n                    <div class="bvi-modal-body">\n                        <div class="bvi-blocks bvi-block-center">\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("letterSpacing"),'</div>\n                                <a href="#" class="bvi-link bvi-letter-spacing-normal">').concat(this._i18n.t("normal"),'</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-average">').concat(this._i18n.t("average"),'</a>\n                                <a href="#" class="bvi-link bvi-letter-spacing-big">').concat(this._i18n.t("big"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("lineHeight"),'</div>\n                                <a href="#" class="bvi-link bvi-line-height-normal">').concat(this._i18n.t("normal"),'</a>\n                                <a href="#" class="bvi-link bvi-line-height-average">').concat(this._i18n.t("average"),'</a>\n                                <a href="#" class="bvi-link bvi-line-height-big">').concat(this._i18n.t("big"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("font"),'</div>\n                                <a href="#" class="bvi-link bvi-font-family-arial">').concat(this._i18n.t("arial"),'</a>\n                                <a href="#" class="bvi-link bvi-font-family-times">').concat(this._i18n.t("times"),'</a>\n                            </div>\n                            <div class="bvi-block">\n                                <div class="bvi-block-title">').concat(this._i18n.t("builtElements"),'</div>\n                                <a href="#" class="bvi-link bvi-built-elements-on">').concat(this._i18n.t("on"),'</a>\n                                <a href="#" class="bvi-link bvi-built-elements-off">').concat(this._i18n.t("off"),'</a>\n                            </div>\n                        </div>\n                        <div class="bvi-blocks bvi-block-center">\n                            <a href="https://bvi.isvek.ru" class="bvi-copyright" target="_blank">bvi.isvek.ru</a>\n                        </div>\n                    </div>\n                    <div class="bvi-modal-footer">\n                        <a href="#" class="bvi-link bvi-reset">').concat(this._i18n.t("reset"),"</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>"),r='<a href="#" class="bvi-link bvi-link-fixed-top bvi-no-styles '.concat(n,'" data-bvi="panel-show">')+'<i class="bvi-images bvi-images-eye bvi-images-size-32 bvi-no-styles"></i></a>';window.addEventListener("scroll",t),document.querySelector(".bvi-body").insertAdjacentHTML("beforebegin",a),document.querySelector(".bvi-body").insertAdjacentHTML("afterbegin",r),t()}},{key:"_set",value:function e(){var t=this;document.body.classList.add("bvi-active"),v(document.body,"div","bvi-body"),h(this._config,function(e){return t._setAttrDataBviBody(e,b(e))}),d(this._elements,function(e){return e.style.display="none"}),document.querySelectorAll("img").forEach(function(e){e.classList.contains("bvi-img")&&e.classList.remove("bvi-img")}),document.querySelectorAll("body *").forEach(function(e){e.classList.contains("bvi-background-image")&&e.classList.remove("bvi-background-image")})}},{key:"_remove",value:function e(){var t=document.querySelector(".bvi-panel"),i=document.querySelector(".bvi-body"),n=document.querySelector(".bvi-link-fixed-top");t&&t.remove(),i&&f(i),n&&n.remove(),this._speech("".concat(this._i18n.v("panelOff"))),document.body.classList.remove("bvi-active"),d(this._elements,function(e){return e.style.display=""}),u(b("reload"))&&document.location.reload(),h(this._config,function(e){m(e)}),this._speechPlayer(),m("panelActive")}},{key:"_images",value:function e(){document.querySelectorAll("img").forEach(function(e){e.classList.contains("bvi-no-style")||e.classList.add("bvi-img")}),document.querySelectorAll(".bvi-body *").forEach(function(e){var t=getComputedStyle(e);"none"===t.backgroundImage||"none"===t.background||e.classList.contains("bvi-no-style")||e.classList.add("bvi-background-image")})}},{key:"_getConfig",value:function e(i){i=t(t({},S),i);var n={};for(var a in S)n[a]=i[a];return c(n,k,_),n}},{key:"_setAttrDataBviBody",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.querySelector(".bvi-body").setAttribute("data-bvi-".concat(t),i)}},{key:"_speechPlayer",value:function e(){var t=this,i=document.querySelectorAll(".bvi-speech-text"),n=document.querySelectorAll(".bvi-speech-link"),a=document.querySelectorAll(".bvi-speech");if("speechSynthesis"in window&&u(b("speech"))){if(a){i&&i.forEach(function(e){return f(e)}),n&&n.forEach(function(e){return e.remove()}),a.forEach(function(e,t){var i="bvi-speech-text-id-".concat(t+1);v(e,"div","bvi-speech-text ".concat(i)),e.insertAdjacentHTML("afterbegin",'\n            <div class="bvi-speech-link">\n              <a href="#" class="bvi-link bvi-speech-play" title="Воспроизвести">Воспроизвести</a>\n              <a href="#" class="bvi-link bvi-speech-pause disabled" title="Пауза">Пауза</a>\n              <a href="#" class="bvi-link bvi-speech-resume disabled" title="Продолжить">Продолжить</a>\n              <a href="#" class="bvi-link bvi-speech-stop disabled" title="Стоп">Стоп</i></a>\n          </div>')});var r=document.querySelectorAll(".bvi-speech-play"),o=document.querySelectorAll(".bvi-speech-pause"),s=document.querySelectorAll(".bvi-speech-resume"),l=document.querySelectorAll(".bvi-speech-stop"),c=function e(t,i){t.forEach(function(e){e.addEventListener("click",function(t){if(t.preventDefault(),"function"==typeof i)return i(e,t)},!1)})};c(r,function(e,i){var n=i.target,a=n.parentNode.nextElementSibling,r=i.target.closest(".bvi-speech-link"),o=document.querySelectorAll(".bvi-speech-play"),s=document.querySelectorAll(".bvi-speech-pause"),l=document.querySelectorAll(".bvi-speech-resume"),c=document.querySelectorAll(".bvi-speech-stop");t._speech(a.textContent,a,!0),o.forEach(function(e){return e.classList.remove("disabled")}),s.forEach(function(e){return e.classList.add("disabled")}),l.forEach(function(e){return e.classList.add("disabled")}),c.forEach(function(e){return e.classList.add("disabled")}),n.classList.add("disabled"),r.querySelector(".bvi-speech-pause").classList.remove("disabled"),r.querySelector(".bvi-speech-stop").classList.remove("disabled")}),c(o,function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-resume").classList.remove("disabled"),g().pause()}),c(s,function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-pause").classList.remove("disabled"),g().resume()}),c(l,function(e,t){var i=t.target,n=t.target.closest(".bvi-speech-link");i.classList.add("disabled"),n.querySelector(".bvi-speech-pause").classList.add("disabled"),n.querySelector(".bvi-speech-play").classList.remove("disabled"),g().cancel()})}}else i&&i.forEach(function(e){return f(e)}),n&&n.forEach(function(e){return e.remove()})}},{key:"_speech",value:function e(t,i){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("speechSynthesis"in window&&u(b("speech"))){g().cancel();for(var r=function e(t,i){t=String(t),i=Number(i)>>>0;var n=t.slice(0,i+1).search(/\S+$/),a=t.slice(i).search(/\s/);return a<0?t.slice(n):t.slice(n,a+i)},o=RegExp("^[\\s\\S]{"+Math.floor(60)+",120}[.!?,]{1}|^[\\s\\S]{1,120}$|^[\\s\\S]{1,120} "),s=[],l=t,c=g().getVoices();l.length>0;)s.push(l.match(o)[0]),l=l.substring(s[s.length-1].length);s.forEach(function(e){var t=new SpeechSynthesisUtterance(e.trim());t.volume=1,t.rate=1,t.pitch=1,t.lang=n._config.lang;for(var o=0;o<c.length;o++)"ru-RU"===n._config.lang&&"Microsoft Pavel - Russian (Russia)"===c[o].name&&(t.voice=c[o]),"en-US"===n._config.lang&&"Microsoft Pavel - English (English)"===c[o].name&&(t.voice=c[o]);a&&(t.onboundary=function(e){i.classList.add("bvi-highlighting");var t=r(e.utterance.text,e.charIndex),n=i.textContent,a=RegExp("("+t.replace(/(\s+)/,"((<[^>]+>)*$1(<[^>]+>)*)")+")","gi");n=(n=n.replace(a,"<mark>$1</mark>")).replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,"$1</mark>$2<mark>$4"),i.innerHTML=n},t.onend=function(e){i.classList.remove("bvi-highlighting");var t=i.textContent;t=t.replace(/(<mark>$1<\/mark>)/,"$1"),i.innerHTML=t}),g().speak(t)})}}}]),e}()}});